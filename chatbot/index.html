<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RoboTech - Chat Interface</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="chat-container">
      
        <div class="chat-header">
            <div class="header-left">
                <div class="logo">
                    <div class="robot-icon">
                        <img src="imagesChat/logo 1 (2).png" alt="RoboTech Logo" class="robot-img">

                    </div>
                </div>
            </div>
            <div class="header-right">
                <button class="close-btn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
        
    
        <div class="chat-subtitle">
            Uma interface de chat ao vivo que permite uma comunica√ß√£o e conex√£o cont√≠nuas e naturais.
        </div>
        
        <!-- Chat Mensagem -->
        <div class="chat-messages">
            <!-- RoboTech Profile -->
            <div class="robo-profile">
                <div class="profile-header">
                    <div class="profile-avatar">
                        <div class="robot-profile-avatar">
                            <img src="imagesChat/Ellipse 1 (1).png" alt="RoboTech Avatar" class="profile-img">
                        </div>
                    </div>
                    <div class="profile-info">
                        <h3 class="profile-name">RoboTech Assistant</h3>
                        <p class="profile-status">Online ‚Ä¢ Dispon√≠vel</p>
                    </div>
                </div>
                <div class="profile-description">
                    <p>ü§ñ Assistente de IA especializado em tecnologia e programa√ß√£o</p>
                    <p>üí° Posso ajudar com HTML, CSS, JavaScript, Python e muito mais!</p>
                    <p>üöÄ Vamos criar algo incr√≠vel juntos!</p>
                </div>
            </div>
            
            <!-- Mensagens ser√£o adicionadas dinamicamente aqui -->
        </div>
        
        <!-- Input Area -->
        <div class="chat-input">
            <div class="input-container">
                <div class="input-left">
                    <i class="fas fa-smile input-icon"></i>
                </div>
                <div class="input-center">
                    <input type="text" placeholder="Digite..." class="message-input">
                </div>
                <div class="input-right">
                    <button class="send-btn">
                        <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
const chatMessages = document.querySelector(".chat-messages");
const messageInput = document.querySelector(".message-input");
const sendBtn = document.querySelector(".send-btn");

function addMessage(content, sender) {
    const messageDiv = document.createElement("div");
    messageDiv.classList.add("message", sender === "user" ? "user-message" : "robochat-message");

    if (sender === "user") {
        messageDiv.innerHTML = `
            <div class="message-content">
                <div class="message-bubble">${content}</div>
                <div class="message-time">${new Date().toLocaleTimeString()}</div>
            </div>
        `;
    } else {
        messageDiv.innerHTML = `
            <div class="message-avatar">
                <div class="robot-avatar">
                    <img src="imagesChat/Ellipse 1 (1).png" alt="Robochat Avatar" class="avatar-img">
                </div>
            </div>
            <div class="message-content">
                <div class="message-header">
                    <span class="sender-name">Robochat</span>
                </div>
                <div class="message-bubble">${content}</div>
                <div class="message-time">${new Date().toLocaleTimeString()}</div>
            </div>
        `;
    }
    
    chatMessages.appendChild(messageDiv);
    chatMessages.scrollTop = chatMessages.scrollHeight;
}

async function sendMessage() {
    const text = messageInput.value.trim();
    if (!text) return;

  
    addMessage(text, "user");
    messageInput.value = "";

    try {
        const res = await fetch("http://localhost:3000/chat", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ message: text })
        });

        if (!res.ok) {
            throw new Error(`HTTP error! status: ${res.status}`);
        }

        const data = await res.json();
        
        // Adiciona a resposta da IA
        if (data.reply && data.reply.trim()) {
            addMessage(data.reply, "bot");
        } else {
            addMessage("Desculpe, n√£o consegui processar sua mensagem. Tente novamente.", "bot");
        }
    } catch (error) {
        console.error("Erro:", error);
        addMessage("‚ùå Erro ao conectar com o servidor. Verifique se o servidor est√° rodando em http://localhost:3000", "bot");
    }
}

sendBtn.addEventListener("click", sendMessage);
messageInput.addEventListener("keypress", (e) => {
    if (e.key === "Enter") sendMessage();
});

// Adiciona mensagem de boas-vindas quando a p√°gina carrega
window.addEventListener("load", () => {
    addMessage("Ol√°! Eu sou o Robochat, seu assistente virtual especializado em tecnologia e programa√ß√£o. Estou aqui para ajud√°-lo com HTML, CSS, JavaScript, Python e muito mais! Como posso ajud√°-lo hoje?", "bot");
});
</script>

</body>
</html>
